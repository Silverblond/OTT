<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>OCR 번역 TTS 시스템</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>

<!-- 🟦 메인 화면 -->
<div id="mainScreen">
    <h1>📄 OCR 번역 TTS 시스템</h1>
    <button id="startBtn">시작하기</button>
</div>

<!-- 🟩 OCR 화면 -->
<div id="ocrScreen" style="display: none;">
    <h2>1. 이미지 업로드</h2>
    <input type="file" id="imageInput" />
    <button onclick="uploadImage()">업로드</button>
    <p id="uploadResult"></p>

    <h2>2. OCR 언어 선택 및 실행</h2>
    <select id="ocrLang">
        <option value="eng">English</option>
        <option value="kor" selected>한국어</option>
        <option value="jpn">日本語</option>
        <option value="chi_sim">中文 (간체)</option>
        <option value="rus">Русский</option>
        <option value="deu">Deutsch</option>
        <option value="fra">Français</option>
        <option value="spa">Español</option>
    </select>
    <button onclick="performOCR()">OCR 시작</button>

    <h2>3. 스크린샷 캡처</h2>
    <button id="screenshotBtn">📸 전체 화면 캡처</button>
    <button id="areaCaptureBtn">📐 영역 지정 캡처</button>
    <p><span id="screenshotStatus"></span> <span id="areaCaptureStatus"></span></p>

    <button onclick="showScreen('resultScreen')">👉 결과 확인 및 번역 / TTS</button>
</div>

<!-- 🟥 결과 화면 -->
<div id="resultScreen" style="display: none;">
    <h2>📝 OCR 결과</h2>
    <pre id="ocrResult"></pre>

    <h2>🌐 번역</h2>
    <label for="targetLang">번역할 언어 선택:</label>
    <select id="targetLang"></select>
    <button onclick="translateText()">번역 시작</button>
    <pre id="translationResult"></pre>

    <h2>🔊 TTS</h2>
    <button onclick="generateTTS()">TTS 실행</button>
    <audio id="audioPlayer" controls></audio>

    <button onclick="showScreen('ocrScreen')">🔁 OCR 화면으로 돌아가기</button>
</div>

<script src="/js/main.js"></script>
<script>
    function showScreen(targetId) {
        const screens = ["mainScreen", "ocrScreen", "resultScreen"];
        screens.forEach(id => {
            document.getElementById(id).style.display = (id === targetId) ? "block" : "none";
        });
    }

    document.getElementById("startBtn").addEventListener("click", () => {
        showScreen("ocrScreen");
    });
</script>
</body>
</html>